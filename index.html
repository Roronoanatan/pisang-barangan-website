<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>E-Commerce Pisang Barangan - BORU REGAR</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Pisang Barangan Boru Regar</h1>
    <div class="actions">
      <div class="muted" id="welcome">Selamat datang, Tamu</div>
      <button id="adminBtn" style="display:none;">Panel Admin</button>
      <button id="loginBtn">Login</button>
      <button class="cart-btn" id="openCart">Keranjang <span class="badge" id="cartCount">0</span></button>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <aside>
        <div class="card">
          <h3>Tentang Kami</h3>
          <p class="muted">Toko Pisang Barangan Boru Regar berdiri sejak 2019, menjual pisang barangan asli Medan yang manis dan segar.</p>
          <hr>
          <div class="small">Petunjuk Admin:</div>
          <div class="small">Login admin: <strong>admin</strong> / <strong>admin</strong></div>
        </div>
      </aside>

      <section>
        <div class="card space-between" style="margin-bottom:12px">
          <div>
            <strong>Daftar Produk</strong>
            <div class="muted">Menampilkan produk Pisang Barangan Boru Regar</div>
          </div>
        </div>
        <div id="products" class="product-list"></div>
      </section>
    </div>
  </main>

  <!-- Drawer Keranjang -->
  <div id="cartDrawer" class="drawer" aria-hidden="true">
    <div class="space-between"><h3>Keranjang Anda</h3><button id="closeCart">Tutup</button></div>
    <div id="cartItems"></div>
    <div class="space-between" style="margin-top:10px">
      <div>
        <div class="muted">Total:</div>
        <div id="cartTotal" style="font-size:18px;font-weight:700">Rp0</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:8px">
        <button id="checkoutBtn">Checkout</button>
        <button id="clearCartBtn" class="btn-danger">Kosongkan</button>
      </div>
    </div>
  </div>

  <!-- Modal Login -->
  <div id="modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal" style="max-width:420px">
      <h3 id="modalTitle">Login</h3>
      <input type="text" id="email" placeholder="email atau 'admin'" style="width:100%;padding:10px;margin-bottom:8px">
      <input type="password" id="pwd" placeholder="password" style="width:100%;padding:10px;margin-bottom:8px">
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-bottom:8px">
        <button id="loginSubmit">Masuk</button>
        <button id="createAccountBtn" class="btn-link">Buat Akun</button>
        <button id="closeModal" class="btn-link">Batal</button>
      </div>
      <div class="small muted-inline">Catatan: untuk akses admin gunakan <strong>admin</strong> / <strong>admin</strong>.</div>
    </div>
  </div>

  <!-- Panel Admin (modal, multi-tab) -->
  <div id="adminPanel" class="modal-backdrop" aria-hidden="true">
    <div class="modal" style="max-width:900px">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3>Admin Panel</h3>
        <div>
          <button id="closeAdmin" class="btn-link" style="color:#999">Tutup</button>
        </div>
      </div>

      <div class="tabs" id="adminTabs">
        <div class="tab active" data-tab="productsTab">Kelola Produk</div>
        <div class="tab" data-tab="usersTab">Daftar Pengguna</div>
        <div class="tab" data-tab="salesTab">Histori Transaksi</div>
        <div class="tab" data-tab="reportTab">Laporan Penjualan</div>
      </div>

      <div id="productsTab" class="admin-content">
        <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px">
          <input id="pName" placeholder="Nama Produk" class="inline-input" style="flex:1">
          <input id="pPrice" placeholder="Harga" type="number" class="inline-input" style="width:120px">
          <input id="pStock" placeholder="Stok" type="number" class="inline-input" style="width:90px">
          <input id="pImg" placeholder="Nama file/gambar (url)" class="inline-input" style="width:220px">
          <button id="addProduct">Tambah Produk</button>
        </div>
        <div id="productTableWrap">
          <!-- table filled by JS -->
        </div>
      </div>

      <div id="usersTab" class="admin-content" style="display:none">
        <h4>Daftar Pengguna</h4>
        <div id="usersTableWrap"></div>
      </div>

      <div id="salesTab" class="admin-content" style="display:none">
        <h4>Histori Transaksi</h4>
        <div id="salesTableWrap"></div>
      </div>

      <div id="reportTab" class="admin-content" style="display:none">
        <h4>Laporan Penjualan</h4>
        <div id="reportWrap"></div>
      </div>
    </div>
  </div>

  <!-- Modal Struk Pembelian -->
  <div id="receiptModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal" style="max-width:480px">
      <h3>Struk Pembelian</h3>

      <div id="receiptContent" style="margin-bottom:15px; font-size:14px; line-height:1.4"></div>

      <div class="space-between" style="margin-top:15px">
        <button id="printReceipt">Cetak</button>
        <button id="closeReceipt" class="btn-link">Selesai</button>
      </div>
    </div>
  </div>

  <!-- Modal Checkout -->
  <div id="checkoutModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal" style="max-width:460px">
      <h3>Checkout</h3>

      <label>Alamat Pengiriman</label>
      <textarea id="checkoutAddress" style="width:100%;height:80px;margin-bottom:12px" placeholder="Contoh: Jl. Mawar No. 12, Medan"></textarea>

      <label>Metode Pembayaran</label>
      <select id="checkoutPayment" style="width:100%;padding:10px;margin-bottom:12px">
        <option value="COD">Bayar di Tempat (COD)</option>
        <option value="Transfer">Transfer Bank</option>
        <option value="QRIS">QRIS</option>
      </select>

      <!-- QRIS AUTOMATIS MUNCUL -->
      <div id="qrisBox" style="display:none; text-align:center; margin-bottom:12px;">
        <img src="qris.png" style="width:220px; border:1px solid #ccc; border-radius:8px;">
        <div class="muted small">Scan QRIS untuk pembayaran</div>
      </div>

      <div style="display:flex;justify-content:flex-end;gap:10px">
        <button id="confirmCheckout">Bayar Sekarang</button>
        <button class="btn-link" id="cancelCheckout">Batal</button>
      </div>
    </div>
  </div>



  <footer>
    <small>Pisang Barangan asli Medan</small>
  </footer>
  <script src="style.js"></script>
</body>
</html>
